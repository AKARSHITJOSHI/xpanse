{
  "openapi": "3.0.1",
  "info": {
    "title": "OpenAPI definition",
    "version": "v0"
  },
  "servers": [
    {
      "url": "http://localhost:9090",
      "description": "Generated server url"
    }
  ],
  "tags": [
    {
      "name": "Terraform",
      "description": "APIs for running Terraform commands"
    }
  ],
  "paths": {
    "/terraform-boot/validate/scripts": {
      "post": {
        "tags": [
          "Terraform"
        ],
        "description": "Deploy resources via Terraform",
        "operationId": "validateWithScripts",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TerraformDeployWithScriptsRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "502": {
            "description": "Bad Gateway",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "503": {
            "description": "Service Unavailable",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TerraformValidationResult"
                }
              }
            }
          }
        }
      }
    },
    "/terraform-boot/plan": {
      "post": {
        "tags": [
          "Terraform"
        ],
        "description": "Get Terraform Plan as JSON string from the list of script files provided",
        "operationId": "planWithScripts",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TerraformPlanWithScriptsRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "502": {
            "description": "Bad Gateway",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "503": {
            "description": "Service Unavailable",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TerraformPlan"
                }
              }
            }
          }
        }
      }
    },
    "/terraform-boot/plan/{module_directory}": {
      "post": {
        "tags": [
          "Terraform"
        ],
        "description": "Get Terraform Plan as JSON string from a directory",
        "operationId": "plan",
        "parameters": [
          {
            "name": "module_directory",
            "in": "path",
            "description": "directory name where the Terraform module files exist.",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TerraformPlanFromDirectoryRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "502": {
            "description": "Bad Gateway",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "503": {
            "description": "Service Unavailable",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TerraformPlan"
                }
              }
            }
          }
        }
      }
    },
    "/terraform-boot/destroy/scripts": {
      "post": {
        "tags": [
          "Terraform"
        ],
        "description": "Destroy resources via Terraform",
        "operationId": "destroyWithScripts",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TerraformDestroyWithScriptsRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "502": {
            "description": "Bad Gateway",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "503": {
            "description": "Service Unavailable",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TerraformResult"
                }
              }
            }
          }
        }
      }
    },
    "/terraform-boot/deploy/{module_directory}": {
      "post": {
        "tags": [
          "Terraform"
        ],
        "description": "Deploy resources via Terraform",
        "operationId": "deploy",
        "parameters": [
          {
            "name": "module_directory",
            "in": "path",
            "description": "directory name where the Terraform module files exist.",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TerraformDeployFromDirectoryRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "502": {
            "description": "Bad Gateway",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "503": {
            "description": "Service Unavailable",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TerraformResult"
                }
              }
            }
          }
        }
      }
    },
    "/terraform-boot/deploy/scripts": {
      "post": {
        "tags": [
          "Terraform"
        ],
        "description": "Deploy resources via Terraform",
        "operationId": "deployWithScripts",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TerraformDeployWithScriptsRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "502": {
            "description": "Bad Gateway",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "503": {
            "description": "Service Unavailable",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TerraformResult"
                }
              }
            }
          }
        }
      }
    },
    "/terraform-boot/deploy/scripts/async": {
      "post": {
        "tags": [
          "Terraform"
        ],
        "description": "async deploy resources via Terraform",
        "operationId": "asyncDeployWithScripts",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TerraformAsyncDeployFromDirectoryRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "502": {
            "description": "Bad Gateway",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "503": {
            "description": "Service Unavailable",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "202": {
            "description": "Accepted"
          }
        }
      }
    },
    "/terraform-boot/validate/{module_directory}": {
      "get": {
        "tags": [
          "Terraform"
        ],
        "description": "Validate the Terraform modules",
        "operationId": "validate",
        "parameters": [
          {
            "name": "module_directory",
            "in": "path",
            "description": "directory name where the Terraform module files exist.",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "502": {
            "description": "Bad Gateway",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "503": {
            "description": "Service Unavailable",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TerraformValidationResult"
                }
              }
            }
          }
        }
      }
    },
    "/terraform-boot/health": {
      "get": {
        "tags": [
          "Terraform"
        ],
        "description": "Check health of Terraform API service",
        "operationId": "healthCheck",
        "responses": {
          "502": {
            "description": "Bad Gateway",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "503": {
            "description": "Service Unavailable",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TerraformBootSystemStatus"
                }
              }
            }
          }
        }
      }
    },
    "/terraform-boot/destroy/{module_directory}": {
      "delete": {
        "tags": [
          "Terraform"
        ],
        "description": "Destroy the Terraform modules",
        "operationId": "destroy",
        "parameters": [
          {
            "name": "module_directory",
            "in": "path",
            "description": "directory name where the Terraform module files exist.",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TerraformDestroyFromDirectoryRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "502": {
            "description": "Bad Gateway",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "503": {
            "description": "Service Unavailable",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TerraformResult"
                }
              }
            }
          }
        }
      }
    },
    "/terraform-boot/destroy/scripts/async": {
      "delete": {
        "tags": [
          "Terraform"
        ],
        "description": "Async destroy the Terraform modules",
        "operationId": "asyncDestroyWithScripts",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TerraformAsyncDestroyFromDirectoryRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "502": {
            "description": "Bad Gateway",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "503": {
            "description": "Service Unavailable",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/Response"
                }
              }
            }
          },
          "202": {
            "description": "Accepted"
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "Response": {
        "required": [
          "details",
          "resultType",
          "success"
        ],
        "type": "object",
        "properties": {
          "resultType": {
            "type": "string",
            "description": "The result code of response.",
            "enum": [
              "Parameters Invalid",
              "Unprocessable Entity",
              "Terraform Execution Failed",
              "Unsupported Enum Value",
              "Service Unavailable",
              "Unauthorized"
            ]
          },
          "details": {
            "type": "array",
            "description": "Details of the errors occurred",
            "items": {
              "type": "string",
              "description": "Details of the errors occurred"
            }
          },
          "success": {
            "type": "boolean",
            "description": "Describes if the request is successful"
          }
        }
      },
      "TerraformDeployWithScriptsRequest": {
        "required": [
          "isPlanOnly",
          "scripts",
          "variables"
        ],
        "type": "object",
        "properties": {
          "isPlanOnly": {
            "type": "boolean",
            "description": "Flag to control if the deployment must only generate the terraform or it must also apply the changes."
          },
          "variables": {
            "type": "object",
            "additionalProperties": {
              "type": "object",
              "description": "Key-value pairs of variables that must be used to execute the Terraform request."
            },
            "description": "Key-value pairs of variables that must be used to execute the Terraform request."
          },
          "envVariables": {
            "type": "object",
            "additionalProperties": {
              "type": "string",
              "description": "Key-value pairs of variables that must be injected as environment variables to terraform process."
            },
            "description": "Key-value pairs of variables that must be injected as environment variables to terraform process."
          },
          "scripts": {
            "type": "array",
            "description": "List of Terraform script files to be considered for deploying changes.",
            "items": {
              "type": "string",
              "description": "List of Terraform script files to be considered for deploying changes."
            }
          }
        }
      },
      "TerraformValidateDiagnostics": {
        "type": "object",
        "properties": {
          "detail": {
            "type": "string"
          }
        }
      },
      "TerraformValidationResult": {
        "type": "object",
        "properties": {
          "valid": {
            "type": "boolean"
          },
          "diagnostics": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/TerraformValidateDiagnostics"
            }
          }
        }
      },
      "TerraformPlanWithScriptsRequest": {
        "required": [
          "scripts",
          "variables"
        ],
        "type": "object",
        "properties": {
          "variables": {
            "type": "object",
            "additionalProperties": {
              "type": "object",
              "description": "Key-value pairs of variables that must be used to execute the Terraform request."
            },
            "description": "Key-value pairs of variables that must be used to execute the Terraform request."
          },
          "envVariables": {
            "type": "object",
            "additionalProperties": {
              "type": "string",
              "description": "Key-value pairs of variables that must be injected as environment variables to terraform process."
            },
            "description": "Key-value pairs of variables that must be injected as environment variables to terraform process."
          },
          "scripts": {
            "type": "array",
            "description": "List of terraform script files to be considered for generating terraform plan",
            "items": {
              "type": "string",
              "description": "List of terraform script files to be considered for generating terraform plan"
            }
          }
        }
      },
      "TerraformPlan": {
        "required": [
          "plan"
        ],
        "type": "object",
        "properties": {
          "plan": {
            "type": "string",
            "description": "Terraform plan as a JSON string"
          }
        }
      },
      "TerraformPlanFromDirectoryRequest": {
        "required": [
          "variables"
        ],
        "type": "object",
        "properties": {
          "variables": {
            "type": "object",
            "additionalProperties": {
              "type": "object",
              "description": "Key-value pairs of variables that must be used to execute the Terraform request."
            },
            "description": "Key-value pairs of variables that must be used to execute the Terraform request."
          },
          "envVariables": {
            "type": "object",
            "additionalProperties": {
              "type": "string",
              "description": "Key-value pairs of variables that must be injected as environment variables to terraform process."
            },
            "description": "Key-value pairs of variables that must be injected as environment variables to terraform process."
          }
        }
      },
      "TerraformDestroyWithScriptsRequest": {
        "required": [
          "scripts",
          "tfState",
          "variables"
        ],
        "type": "object",
        "properties": {
          "variables": {
            "type": "object",
            "additionalProperties": {
              "type": "object",
              "description": "Key-value pairs of regular variables that must be used to execute the Terraform request."
            },
            "description": "Key-value pairs of regular variables that must be used to execute the Terraform request."
          },
          "envVariables": {
            "type": "object",
            "additionalProperties": {
              "type": "string",
              "description": "Key-value pairs of variables that must be injected as environment variables to terraform process."
            },
            "description": "Key-value pairs of variables that must be injected as environment variables to terraform process."
          },
          "scripts": {
            "type": "array",
            "description": "List of script files for destroy requests deployed via scripts",
            "items": {
              "type": "string",
              "description": "List of script files for destroy requests deployed via scripts"
            }
          },
          "tfState": {
            "type": "string",
            "description": "The .tfState file content after deployment"
          }
        }
      },
      "TerraformResult": {
        "type": "object",
        "properties": {
          "commandStdOutput": {
            "type": "string"
          },
          "commandStdError": {
            "type": "string"
          },
          "terraformState": {
            "type": "string"
          },
          "importantFileContentMap": {
            "type": "object",
            "additionalProperties": {
              "type": "string"
            }
          },
          "commandSuccessful": {
            "type": "boolean"
          }
        }
      },
      "TerraformDeployFromDirectoryRequest": {
        "required": [
          "isPlanOnly",
          "variables"
        ],
        "type": "object",
        "properties": {
          "isPlanOnly": {
            "type": "boolean",
            "description": "Flag to control if the deployment must only generate the terraform or it must also apply the changes."
          },
          "variables": {
            "type": "object",
            "additionalProperties": {
              "type": "object",
              "description": "Key-value pairs of variables that must be used to execute the Terraform request."
            },
            "description": "Key-value pairs of variables that must be used to execute the Terraform request."
          },
          "envVariables": {
            "type": "object",
            "additionalProperties": {
              "type": "string",
              "description": "Key-value pairs of variables that must be injected as environment variables to terraform process."
            },
            "description": "Key-value pairs of variables that must be injected as environment variables to terraform process."
          }
        }
      },
      "TerraformAsyncDeployFromDirectoryRequest": {
        "required": [
          "isPlanOnly",
          "scripts",
          "variables",
          "webhookConfig"
        ],
        "type": "object",
        "properties": {
          "isPlanOnly": {
            "type": "boolean",
            "description": "Flag to control if the deployment must only generate the terraform or it must also apply the changes."
          },
          "variables": {
            "type": "object",
            "additionalProperties": {
              "type": "object",
              "description": "Key-value pairs of variables that must be used to execute the Terraform request."
            },
            "description": "Key-value pairs of variables that must be used to execute the Terraform request."
          },
          "envVariables": {
            "type": "object",
            "additionalProperties": {
              "type": "string",
              "description": "Key-value pairs of variables that must be injected as environment variables to terraform process."
            },
            "description": "Key-value pairs of variables that must be injected as environment variables to terraform process."
          },
          "scripts": {
            "type": "array",
            "description": "List of Terraform script files to be considered for deploying changes.",
            "items": {
              "type": "string",
              "description": "List of Terraform script files to be considered for deploying changes."
            }
          },
          "webhookConfig": {
            "$ref": "#/components/schemas/WebhookConfig"
          }
        }
      },
      "WebhookConfig": {
        "required": [
          "authType",
          "url"
        ],
        "type": "object",
        "properties": {
          "url": {
            "type": "string",
            "description": "Callback address after deployment/destroy is completed."
          },
          "authType": {
            "type": "string",
            "description": "The permission type when calling back.",
            "enum": [
              "NONE",
              "OAUTH2"
            ]
          }
        },
        "description": "Configuration information of webhook."
      },
      "TerraformBootSystemStatus": {
        "required": [
          "healthStatus"
        ],
        "type": "object",
        "properties": {
          "healthStatus": {
            "type": "string",
            "description": "The health status of Xpanse api service.",
            "enum": [
              "OK",
              "NOK"
            ]
          }
        }
      },
      "TerraformDestroyFromDirectoryRequest": {
        "required": [
          "variables"
        ],
        "type": "object",
        "properties": {
          "variables": {
            "type": "object",
            "additionalProperties": {
              "type": "object",
              "description": "Key-value pairs of regular variables that must be used to execute the Terraform request."
            },
            "description": "Key-value pairs of regular variables that must be used to execute the Terraform request."
          },
          "envVariables": {
            "type": "object",
            "additionalProperties": {
              "type": "string",
              "description": "Key-value pairs of variables that must be injected as environment variables to terraform process."
            },
            "description": "Key-value pairs of variables that must be injected as environment variables to terraform process."
          }
        }
      },
      "TerraformAsyncDestroyFromDirectoryRequest": {
        "required": [
          "scripts",
          "tfState",
          "variables",
          "webhookConfig"
        ],
        "type": "object",
        "properties": {
          "variables": {
            "type": "object",
            "additionalProperties": {
              "type": "object",
              "description": "Key-value pairs of regular variables that must be used to execute the Terraform request."
            },
            "description": "Key-value pairs of regular variables that must be used to execute the Terraform request."
          },
          "envVariables": {
            "type": "object",
            "additionalProperties": {
              "type": "string",
              "description": "Key-value pairs of variables that must be injected as environment variables to terraform process."
            },
            "description": "Key-value pairs of variables that must be injected as environment variables to terraform process."
          },
          "scripts": {
            "type": "array",
            "description": "List of script files for destroy requests deployed via scripts",
            "items": {
              "type": "string",
              "description": "List of script files for destroy requests deployed via scripts"
            }
          },
          "tfState": {
            "type": "string",
            "description": "The .tfState file content after deployment"
          },
          "webhookConfig": {
            "$ref": "#/components/schemas/WebhookConfig"
          }
        }
      }
    }
  }
}