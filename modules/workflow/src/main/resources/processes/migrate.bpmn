<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:activiti="http://activiti.org/bpmn" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" typeLanguage="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.w3.org/1999/XPath" targetNamespace="http://www.activiti.org/processdef">
  <process id="migrate" name="migrate" isExecutable="true">
    <documentation>Service Migrate Process</documentation>
    <startEvent id="sid-4dbef005-83d3-4314-a32e-20037c68e570" name="StartMigrate">
      <documentation>Start Migrate</documentation>
    </startEvent>
    <serviceTask id="sid-0f42fbfb-1227-4e2c-99fd-827c9011c3a9" activiti:exclusive="false" name="DeployService" activiti:class="org.eclipse.xpanse.modules.workflow.handle.migrate.MigrateDeployProcess">
      <documentation>Deploy Service</documentation>
    </serviceTask>
    <serviceTask id="sid-67595470-2e00-43ea-b878-122e7cccd765" activiti:exclusive="true" name="DestroyService" activiti:class="org.eclipse.xpanse.modules.workflow.handle.migrate.MigrateDestroyProcess">
      <documentation>Destroy Service</documentation>
    </serviceTask>
    <exclusiveGateway id="sid-793fe6c0-8590-4cb9-b2ac-93440a2ff4d9" name="IsDeploySuccess"/>
    <exclusiveGateway id="sid-9d73f33b-8a2d-441b-b924-ec1482270e6a" name="IsDestroySuccess"/>
    <endEvent id="sid-f1784790-c7dc-4aaa-996c-9a57117fcf2b"/>
    <sequenceFlow id="sid-0ba2f8b2-c741-4390-a158-1bc4b93fadda" sourceRef="sid-0f42fbfb-1227-4e2c-99fd-827c9011c3a9" targetRef="sid-793fe6c0-8590-4cb9-b2ac-93440a2ff4d9"/>
    <sequenceFlow id="sid-6af125f7-fe51-46ef-82cf-483683714523" sourceRef="sid-9d73f33b-8a2d-441b-b924-ec1482270e6a" targetRef="sid-f1784790-c7dc-4aaa-996c-9a57117fcf2b">
      <conditionExpression xsi:type="tFormalExpression">${isDestroySuccess==true}</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-4df34698-72ba-4f7d-889a-e259103735a0" sourceRef="sid-793fe6c0-8590-4cb9-b2ac-93440a2ff4d9" targetRef="sid-0f42fbfb-1227-4e2c-99fd-827c9011c3a9">
      <conditionExpression xsi:type="tFormalExpression">${isDeploySuccess==false &amp;&amp; deployRetryNum&lt;=1}</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-e653af70-a114-4f8e-8df3-bc3ca2d6b2bb" sourceRef="sid-e3c0974d-f05c-4e2f-901b-51505fa6c811" targetRef="sid-67595470-2e00-43ea-b878-122e7cccd765">
      <conditionExpression xsi:type="tFormalExpression"/>
    </sequenceFlow>
    <serviceTask id="sid-1006f047-b52c-43d6-9d98-dc78e5412f92" name="ExportData" activiti:exclusive="true" activiti:class="org.eclipse.xpanse.modules.workflow.handle.migrate.MigrateExportDataProcess">
      <documentation>Export Data</documentation>
    </serviceTask>
    <sequenceFlow id="sid-90142f92-9a96-4e08-820c-24a635aed7a5" sourceRef="sid-1006f047-b52c-43d6-9d98-dc78e5412f92" targetRef="sid-0f42fbfb-1227-4e2c-99fd-827c9011c3a9"/>
    <serviceTask id="sid-e3c0974d-f05c-4e2f-901b-51505fa6c811" name="ImportData" activiti:exclusive="true" activiti:class="org.eclipse.xpanse.modules.workflow.handle.migrate.MigrateImportDataProcess">
      <documentation>Import Data</documentation>
    </serviceTask>
    <sequenceFlow id="sid-2ee10ea8-d32d-4e59-bc1f-dc611d3fc1d0" sourceRef="sid-793fe6c0-8590-4cb9-b2ac-93440a2ff4d9" targetRef="sid-e3c0974d-f05c-4e2f-901b-51505fa6c811">
      <conditionExpression xsi:type="tFormalExpression">${isDeploySuccess==true}</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-35e24f97-1c5e-4920-b553-dbfc069090a0" sourceRef="sid-4dbef005-83d3-4314-a32e-20037c68e570" targetRef="sid-1006f047-b52c-43d6-9d98-dc78e5412f92"/>
    <userTask id="sid-6c4c67be-0bcb-4727-a0da-5ec1fb65076f" activiti:assignee="${assignee}" name=" HandlingDeploymentFailuresManually">
      <documentation>Handling deployment failures manually</documentation>
      <extensionElements>
        <activiti:executionListener class="org.eclipse.xpanse.modules.workflow.handle.migrate.DeployFailedManualHandlerListener"/>
      </extensionElements>
    </userTask>
    <userTask id="sid-42ae4a3e-00bc-4935-ab95-142a1ee22fe1" activiti:assignee="${assignee}" name="ManuallyHandleDestructionFailure">
      <documentation>Manually handle destruction failure</documentation>
      <extensionElements>
        <activiti:executionListener class="org.eclipse.xpanse.modules.workflow.handle.migrate.DestroyFailedManualHandlerListener"/>
      </extensionElements>
    </userTask>
    <exclusiveGateway id="sid-a1fd872a-d645-490e-a280-026a0a47f19a"/>
    <sequenceFlow id="sid-31a531de-521e-45f7-b9df-2a783d3eb389" sourceRef="sid-793fe6c0-8590-4cb9-b2ac-93440a2ff4d9" targetRef="sid-6c4c67be-0bcb-4727-a0da-5ec1fb65076f">
      <conditionExpression xsi:type="tFormalExpression">${isDeploySuccess==false &amp;&amp; deployRetryNum&gt;1}</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-fe8c63ed-a5f7-433f-9e71-7feaa5a6c6c6" sourceRef="sid-6c4c67be-0bcb-4727-a0da-5ec1fb65076f" targetRef="sid-a1fd872a-d645-490e-a280-026a0a47f19a"/>
    <sequenceFlow id="sid-59b75ef7-21ce-4a8d-a350-a4c536da11f5" sourceRef="sid-a1fd872a-d645-490e-a280-026a0a47f19a" targetRef="sid-0f42fbfb-1227-4e2c-99fd-827c9011c3a9">
      <conditionExpression xsi:type="tFormalExpression">${isRetryTask==true}</conditionExpression>
    </sequenceFlow>
    <exclusiveGateway id="sid-77bb6fba-8be1-4281-ad6d-ab1cab890d11"/>
    <sequenceFlow id="sid-841accd9-7a42-472d-a149-a74cbd4b39d3" sourceRef="sid-42ae4a3e-00bc-4935-ab95-142a1ee22fe1" targetRef="sid-77bb6fba-8be1-4281-ad6d-ab1cab890d11"/>
    <sequenceFlow id="sid-6922923b-38ae-4d96-b3f7-3a9c91132b74" sourceRef="sid-67595470-2e00-43ea-b878-122e7cccd765" targetRef="sid-9d73f33b-8a2d-441b-b924-ec1482270e6a"/>
    <sequenceFlow id="sid-6e4678d3-0658-4f1b-b88a-035f44562fd2" sourceRef="sid-9d73f33b-8a2d-441b-b924-ec1482270e6a" targetRef="sid-67595470-2e00-43ea-b878-122e7cccd765">
      <conditionExpression xsi:type="tFormalExpression">${isDestroySuccess==false &amp;&amp; destroyRetryNum&lt;=1}</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-96432977-9907-4222-afea-929dd76e3c86" sourceRef="sid-77bb6fba-8be1-4281-ad6d-ab1cab890d11" targetRef="sid-67595470-2e00-43ea-b878-122e7cccd765">
      <conditionExpression xsi:type="tFormalExpression">${isRetryTask==true}</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-bae49b0d-604f-4232-9719-968e99742681" sourceRef="sid-9d73f33b-8a2d-441b-b924-ec1482270e6a" targetRef="sid-42ae4a3e-00bc-4935-ab95-142a1ee22fe1">
      <conditionExpression xsi:type="tFormalExpression">${isDestroySuccess==false &amp;&amp; destroyRetryNum&gt;1}</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-ff4aca53-37c2-41b0-a998-d1e6100d0ea2" sourceRef="sid-a1fd872a-d645-490e-a280-026a0a47f19a" targetRef="sid-f1784790-c7dc-4aaa-996c-9a57117fcf2b">
      <conditionExpression xsi:type="tFormalExpression">${isRetryTask==false}</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-24f32971-36fc-41fc-9cfd-ecdf29c15678" sourceRef="sid-77bb6fba-8be1-4281-ad6d-ab1cab890d11" targetRef="sid-f1784790-c7dc-4aaa-996c-9a57117fcf2b">
      <conditionExpression xsi:type="tFormalExpression">${isRetryTask==false}</conditionExpression>
    </sequenceFlow>
  </process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_migrate">
    <bpmndi:BPMNPlane bpmnElement="migrate" id="BPMNPlane_migrate">
      <bpmndi:BPMNShape id="shape-58975312-dbea-4c33-acc5-fe4ec04d9f77" bpmnElement="sid-4dbef005-83d3-4314-a32e-20037c68e570">
        <omgdc:Bounds x="-250.0" y="-75.0" width="30.0" height="30.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape-0295b9a4-14a2-4d33-b9f3-d979d8be09a5" bpmnElement="sid-0f42fbfb-1227-4e2c-99fd-827c9011c3a9">
        <omgdc:Bounds x="-25.000004" y="-87.5" width="60.000004" height="55.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="sid-b491cf2f-6fed-467e-bdc3-9d5c9b5d6003" bpmnElement="sid-67595470-2e00-43ea-b878-122e7cccd765">
        <omgdc:Bounds x="305.44" y="-87.49999" width="60.000004" height="55.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape-2eeed321-cb14-4ce8-a14a-b694f9579923" bpmnElement="sid-793fe6c0-8590-4cb9-b2ac-93440a2ff4d9">
        <omgdc:Bounds x="80.0" y="-80.0" width="40.0" height="40.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape-83f5952a-4c4e-46e1-acd2-e320213f30c2" bpmnElement="sid-9d73f33b-8a2d-441b-b924-ec1482270e6a">
        <omgdc:Bounds x="410.0" y="-79.99999" width="40.0" height="40.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape-9e41350c-0042-4702-a34b-f7f9786fa4bf" bpmnElement="sid-f1784790-c7dc-4aaa-996c-9a57117fcf2b">
        <omgdc:Bounds x="500.0" y="-75.0" width="30.0" height="30.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="edge-ab89b437-ce19-4466-8af5-f81d63443177" bpmnElement="sid-0ba2f8b2-c741-4390-a158-1bc4b93fadda">
        <omgdi:waypoint x="35.0" y="-60.0"/>
        <omgdi:waypoint x="80.0" y="-60.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="edge-74320df7-725f-410d-ba99-91a1444f53ae" bpmnElement="sid-6af125f7-fe51-46ef-82cf-483683714523">
        <omgdi:waypoint x="450.0" y="-59.999992"/>
        <omgdi:waypoint x="500.0" y="-60.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="edge-d3d25fe6-4ccd-4a03-924c-29911ddc1f8f" bpmnElement="sid-4df34698-72ba-4f7d-889a-e259103735a0">
        <omgdi:waypoint x="100.0" y="-80.0"/>
        <omgdi:waypoint x="100.0" y="-131.875"/>
        <omgdi:waypoint x="4.999998" y="-131.875"/>
        <omgdi:waypoint x="4.999998" y="-87.50001"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="edge-340858a6-0215-4b2a-99a1-44529de72f50" bpmnElement="sid-e653af70-a114-4f8e-8df3-bc3ca2d6b2bb">
        <omgdi:waypoint x="242.92944" y="-60.000008"/>
        <omgdi:waypoint x="305.44" y="-59.999992"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="sid-5e3ed3db-d1f4-4d4b-8f19-deae2bd20caa" bpmnElement="sid-1006f047-b52c-43d6-9d98-dc78e5412f92">
        <omgdc:Bounds x="-160.8457" y="-87.5" width="60.000004" height="55.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="edge-04597f1d-6d6c-4734-b2b3-28874952169f" bpmnElement="sid-90142f92-9a96-4e08-820c-24a635aed7a5">
        <omgdi:waypoint x="-100.8457" y="-60.0"/>
        <omgdi:waypoint x="-25.000004" y="-60.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="sid-8fd3b817-78f0-4e04-b99c-dc781c93c5f6" bpmnElement="sid-e3c0974d-f05c-4e2f-901b-51505fa6c811">
        <omgdc:Bounds x="182.92944" y="-87.50001" width="60.000004" height="55.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="edge-f82dcf10-cd84-493d-a36b-67f056c3f671" bpmnElement="sid-2ee10ea8-d32d-4e59-bc1f-dc611d3fc1d0">
        <omgdi:waypoint x="120.0" y="-60.0"/>
        <omgdi:waypoint x="182.92944" y="-60.000008"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="edge-05b5bb45-b6a6-4167-b4a9-4dc15f78aa0d" bpmnElement="sid-35e24f97-1c5e-4920-b553-dbfc069090a0">
        <omgdi:waypoint x="-220.0" y="-60.0"/>
        <omgdi:waypoint x="-160.8457" y="-60.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="shape-b2295a55-3496-4f42-bc4b-987a9787dda6" bpmnElement="sid-6c4c67be-0bcb-4727-a0da-5ec1fb65076f">
        <omgdc:Bounds x="67.50001" y="5.000001" width="65.0" height="55.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="sid-eb0d8afa-8406-434c-8952-fb6a94ffb2b7" bpmnElement="sid-42ae4a3e-00bc-4935-ab95-142a1ee22fe1">
        <omgdc:Bounds x="397.49997" y="5.0" width="65.0" height="55.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape-895ac8d9-7fd7-4c64-91b8-811ec412d105" bpmnElement="sid-a1fd872a-d645-490e-a280-026a0a47f19a">
        <omgdc:Bounds x="-15.000002" y="12.500002" width="40.0" height="40.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="edge-1b8876f7-5d23-447f-b8f8-894392120298" bpmnElement="sid-31a531de-521e-45f7-b9df-2a783d3eb389">
        <omgdi:waypoint x="100.0" y="-40.0"/>
        <omgdi:waypoint x="100.00001" y="5.000001"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="edge-f105edb9-5335-40e7-9040-a32f941cab01" bpmnElement="sid-fe8c63ed-a5f7-433f-9e71-7feaa5a6c6c6">
        <omgdi:waypoint x="67.50001" y="32.5"/>
        <omgdi:waypoint x="24.999998" y="32.5"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="edge-191f8246-4e7e-4af8-8b01-b0a3d03841a9" bpmnElement="sid-59b75ef7-21ce-4a8d-a350-a4c536da11f5">
        <omgdi:waypoint x="4.999998" y="12.500001"/>
        <omgdi:waypoint x="4.999998" y="-32.5"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="shape-1fb8e2af-99e6-40dd-8e4d-e87dcbe2c080" bpmnElement="sid-77bb6fba-8be1-4281-ad6d-ab1cab890d11">
        <omgdc:Bounds x="315.44" y="12.500004" width="40.0" height="40.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="edge-babf2d9d-566a-496b-9270-2cdae688bc10" bpmnElement="sid-841accd9-7a42-472d-a149-a74cbd4b39d3">
        <omgdi:waypoint x="397.49997" y="32.5"/>
        <omgdi:waypoint x="355.44" y="32.500004"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="edge-4dd1d429-18e1-43b0-bc19-c540e19f638a" bpmnElement="sid-6922923b-38ae-4d96-b3f7-3a9c91132b74">
        <omgdi:waypoint x="365.44" y="-59.999992"/>
        <omgdi:waypoint x="410.0" y="-59.999992"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="edge-7b099383-fa63-44de-b5d2-a8dc9cfcb194" bpmnElement="sid-6e4678d3-0658-4f1b-b88a-035f44562fd2">
        <omgdi:waypoint x="430.0" y="-80.0"/>
        <omgdi:waypoint x="430.0" y="-131.875"/>
        <omgdi:waypoint x="335.43997" y="-131.87502"/>
        <omgdi:waypoint x="335.43997" y="-87.499985"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="edge-60e8bffe-0db3-4eb9-8ba2-c5acbcf39f05" bpmnElement="sid-96432977-9907-4222-afea-929dd76e3c86">
        <omgdi:waypoint x="335.44" y="12.500011"/>
        <omgdi:waypoint x="335.44" y="-32.499992"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="edge-42026922-03bb-4cc0-a607-f420ba466abc" bpmnElement="sid-bae49b0d-604f-4232-9719-968e99742681">
        <omgdi:waypoint x="430.0" y="-39.999992"/>
        <omgdi:waypoint x="429.99997" y="5.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="edge-9aecc305-1b1a-469c-9632-4b4a7e018816" bpmnElement="sid-ff4aca53-37c2-41b0-a998-d1e6100d0ea2">
        <omgdi:waypoint x="4.999998" y="52.5"/>
        <omgdi:waypoint x="4.999998" y="130.0"/>
        <omgdi:waypoint x="515.0" y="130.0"/>
        <omgdi:waypoint x="515.0" y="-45.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="edge-e1b07ead-3963-47b6-9044-5c9d7ff95d4c" bpmnElement="sid-24f32971-36fc-41fc-9cfd-ecdf29c15678">
        <omgdi:waypoint x="335.44" y="52.500004"/>
        <omgdi:waypoint x="335.43997" y="130.0"/>
        <omgdi:waypoint x="515.0" y="130.0"/>
        <omgdi:waypoint x="515.0" y="-45.000004"/>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</definitions>